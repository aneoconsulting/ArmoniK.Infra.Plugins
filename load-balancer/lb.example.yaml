# List of clusters
clusters:
  # configuration for the cluster called "remote"
  remote:
    # Endpoint of the cluster
    endpoint: https://93.184.215.14:5001/
    # Path to the client certificate (default: null)
    cert_pem:
    # Path to the client certificate's private key (default: null)
    key_pem:
    # Path to the Certificate Authority used to validate the server (default: null)
    ca_cert:
    # Whether the server authenticity should be verified or not (default: false)
    allow_unsafe_connection: false
    # Override the hostname for the TLS verification (default: null)
    override_target_name: example.com
    # Size of the connection pool to this cluster (default: 4*NCPU)
    # Set to 0 to disable the limit.
    pool_size: 0
    # Number of requests sent on a connection before it is recreated (default: 800)
    # Set to 0 to disable the limit.
    requests_per_connection: 0
    # Whether a connection can process multiple requests simultaneously (default: false)
    # If the upstream cluster requests the connection closure regularly (like nginx), it is recommended to keep it disabled.
    multiplex: true

  # configuration for the cluster called "local"
  local:
    # Endpoint of the cluster
    endpoint: http://localhost:5001/

# IP on which the load balancer will listen (default: 0.0.0.0)
listen_ip: 127.0.0.1
# Port on which the load balancer will listen (default: 8081)
listen_port: 1337
# Time interval in seconds between session refreshes (default: 10)
refresh_delay: 60
# Path to the SQLite database to store all the sessions (default: null)
# If null, the database will be kept on-memory, and if empty (""), "lb.sqlite" will be used.
# The path supports the URI syntax: https://www.sqlite.org/uri.html
sqlite_path: ./sessions.sqlite
# Number of sessions to keep in the session-cluster mapping cache (default: 10000)
# As a rule of thumb, a session entry in the cache should takes about a hundred bytes in memory.
session_cache_size: 50000
# Number of results to keep in the session-cluster mapping cache (default: 1000000)
# As a rule of thumb, a result entry in the cache should takes about a hundred bytes in memory.
result_cache_size: 2000
# Number of tasks to keep in the session-cluster mapping cache (default: 1000000)
# As a rule of thumb, a task entry in the cache should takes about a hundred bytes in memory.
task_cache_size: 3000
